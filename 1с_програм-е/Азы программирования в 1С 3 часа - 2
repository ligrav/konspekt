Коллекции

Ключ коллекции может быть числом, строкой или датой 
что очень важно 
есть отдельная коллекция для табличной части 

Виды коллекций
Массив
Структура
Соотвествие
Список значенийей
Таблица значений
Дерево значений 

Массив использует числовой индекс, который начинается с нуля 

Создаю внешнюю обработку "УниверсальныеКоллекции"
для того что бы создать форму
На форме создаем группу - страница "Группа 1"
В ней создаем группу страница по имени "СтраницаМассив" Синоним "Массив"
и в нее добавляем команду "РаботаСМассивом"
его код



&НаКлиенте
Процедура РаботаСМассивом(Команда)
	// Как создать массив
	МассивСотрудников = Новый Массив;
	
	// Как добавить в массив элементы
	
	МассивСотрудников.Добавить("Иванов");
	МассивСотрудников.Добавить("Петров");
	МассивСотрудников.Добавить("Николаев");
	
	// как получить количество элементов в массиве 
	
	КоличествоЭлементов = МассивСотрудников.Количество();
	
	// как найти значение в массиве
	
	ИндексПетрова = МассивСотрудников.Найти("Петров"); // 1
    ИндексВасильева = МассивСотрудников.Найти("Васильев"); // Неопределено 
	
	// как получить значение массива ( 2 способа )    
	
	Петров = МассивСотрудников[1];

	//2
	Петров = МассивСотрудников.Получить(1);
	
	// Обход всех элементов массива 
	
	//1
	Для Счетчик = 0 По МассивСотрудников.ВГраница() Цикл
	
		Сообщить(МассивСотрудников[Счетчик]);
	
	КонецЦикла;   
	
	//2
	
	Для каждого ЭлементМассива Из МассивСотрудников Цикл
		
		Сообщить(ЭлементМассива);
		
	КонецЦикла;
	
	// Как удалить элемент массива   
	
		Николаев = МассивСотрудников.Найти("Николаев");
		МассивСотрудников.Удалить(Николаев);
		
	
	// Как очистить массив    
	
	МассивСотрудников.Очистить();
	
КонецПроцедуры

Типичные ошибки у массива, так же он начинает работать с отладчиком

Индекс находится за границами массива
// Достаточно обратиться к Массиву[10]
Значение индекса выходит за границы диапазона
// когда пытаемся например удать ячефку в массиве, когда в массиве ее уже нет

Пробуем коллекцию со строкой(на словарь похоже)
Создаем новую группу "СтраницаСтрукрура" и в нее заводим команду "РаботаСоСтруктурой"


&НаКлиенте
Процедура РаботаСоСтруктурой(Команда)
	//Как создать структура (3 способа)
	
	//1
	СтруктураДанных = Новый Структура;
	
	//2
	
	СтруктураДанных = Новый Структура("ФИО, ДатаРождения, АдресПрописки, НомерПаспорта");
	
	//3   при большом количестве ключей этот способ не очень удобен
	
	СтруктураДанных =  Новый Структура("ФИО, ДатаРождения, АдресПрописки, НомерПаспорта", "Иванов", '19900108', "г.Москва, ул.Солнечная, 14", "МС1214141");
	
	
	// Как вставить элемент в структуру 
	
	СтруктураДанных.Вставить("ТабельныйНомер", "ТТ-14");
	
	// Как получить количество элементов в структуре
	
	КоличествоЭлементов = СтруктураДанных.Количество();
	
	// Как найти значение в структуре
	
	ДатаРождения = Неопределено;
	СтрокаВывода = СтруктураДанных.Свойство("ДатаРождения", ДатаРождения); // ответ ДА
	Сообщить(СтрокаВывода);  // ДА, я не знаю почему, но ответ Да
	// Как получить значение структура (3 способа)   
	//1
	ФИО = СтруктураДанных["ФИО"];
	//2
	ФИО = СтруктураДанных.ФИО;
	//3    самый безопасный способ
	ФИО = Неопределено;
	СтруктураДанных.Свойство("ФИО", ФИО);
	
	// Обход всех элементов структуры
	
	Для каждого ЭлементаСтруктуры Из СтруктураДанных Цикл 
		
		Сообщить(ЭлементаСтруктуры.Ключ + " = " + ЭлементаСтруктуры.Значение);
		
	КонецЦикла;
	
	// Как удалить элемент структуры 
		СтруктураДанных.Удалить("НомерПаспорта");
	// Как очистить структуру          
		СтруктураДанных.Очистить();
КонецПроцедуры


Ошибки Структуры СтруктураДанных 

Задано неправильно имя атрибута структуры 

Как эту ощибку получить 

СтруктураДанных.Вставить("1Сотрудник"); // 1 в начале нельзя 

Сейчас будет непростой код

МассивЧисел = Новый Массив;
Для Число = 1 По 5000 Цикл
	МассивЧисел.Добавить(Число);
КонецЦикла;

СтруктураЧисел = Новый Структура;
Для каждого ЗначениеМассива Из МассивЧисел Цикл
	ИмяКлюча = "Число_" + МассивЧисел.Найти(ЗначениеМассива); // тут уже начинается ошибка, но что бы понять ее причину используем попытку
	Попытка
		СтруктураЧисел.Вставить(ИмяКлюча, ЗначениеМассива); // например Число_1:1 Наверное так
	Исключение
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = ЗначениеМассива;
		Сообщение.Сообщить(); // тут мы узнаем на какой итерации происходит ошибки и можно добавить ТочкуОстанову с условием 
	// в итоге ошибка на числе 1 000 потому что в 1 000 используется разделитель
	// Решение
	// ИмяКлюча = "Число_" + МассивЧисел.Найти(ЗначениеМассива), "ЧГ=0");
	КонецПопытки;
КонецЦикла;


Коллекция Соотвествие 
Ключем может выступать Строка, число, дата, ссылка

Добавляем команду "РаботаССоотвествием"
Группу "СтраницаСоответсвие"

Завершил работу в 1:00:00
Что бы продолжить работу, следует открыть обработку УниверсальныеКоллекции
// Код для коллекции Соответствие
&НаКлиенте
Процедура РаботаССоответвествием(Команда)
	// Как создать соответствие 
	СоотстветствиеРазмеров = Новый Соответствие;
	// Как вставить элемент в соотвествие      
	СоотстветствиеРазмеров.Вставить(36, "XS");
	СоотстветствиеРазмеров.Вставить(38, "S"); 
	СоотстветствиеРазмеров.Вставить(40, "M");
	СоотстветствиеРазмеров.Вставить(42, "L");
	СоотстветствиеРазмеров.Вставить(44, "XL");
	// Как получить количество элементов в соотвествии
	КоличествоЭлементов = СоотстветствиеРазмеров.Количество();
	// Как найти значение в соответствии   
	Размер36 = СоотстветствиеРазмеров.Получить(36);
	Если Размер36 <> Неопределено Тогда
		Сообщить(Размер36);  // XS
	КонецЕсли;
	// Как получить значение в соответствии   
	//1
	Размер42 = СоотстветствиеРазмеров[42]; 
	// 2   
	Размер42 = СоотстветствиеРазмеров.Получить(42);
    Если Размер42 <> Неопределено Тогда
		Сообщить(Размер42);  // L
	КонецЕсли; 
	
	СоотстветствиеРазмеров[40] = "XXXL"; // меняем размер  
	// Обход всех элементов соответствия     
	Для каждого ЭлементСоответствия Из СоотстветствиеРазмеров Цикл                
		// ("" +  дабы не было ошибки, что мы число прибавляем к строке
		Сообщить("" + ЭлементСоответствия.Ключ + " = " + ЭлементСоответствия.Значение);	
	КонецЦикла;
	// Как удалить элемент соответствия 
	СоотстветствиеРазмеров.Удалить(42);
	// Как очистить соответствие
	СоотстветствиеРазмеров.Очистить();
КонецПроцедуры

// Даже если обратиться в соотетствие к ключу которого нет, то будет значение неопределенно и ошибки не будет
// тут допустить ошибку тяжелее 
// Что бы проверить тип коллекции используется ТипЗнч
Привер
Если ТипЗнч(СоотстветствиеРазмеров) = Тип("Массив") Тогда
	Сообщить("Это массив");
ИначеЕсли ТипЗнч(СоотстветствиеРазмеров) = Тип("Структура") Тогда
	Сообщить("Это Структура");
ИначеЕсли ТипЗнч(СоотстветствиеРазмеров) = Тип("Соответствие") Тогда
	Сообщить("Это Соответствие");
КонецЕсли;
Час 11 минут 

Список Значений 
Она создал таблицу которая показывает как Список значений выглядит
Индекс 		Значение 		Представление 		Пометка 	Картинка
 0				"Пн" 		"Понедельник"		  Ложь
 1				"Вт" 		"Вторник"		      Истина
 2				"Ср" 		"Среда"				  Ложь

Создаем новую группу - страницу  "СтраницаСписокЗначений" - Синоним Список значений
Создаем новую команду "РаботаСоСпискомЗначений"

&НаКлиенте
Процедура РаботаСоСпискомЗначений(Команда)
	
	// Как создать список значений      
	СписокДней = Новый СписокЗначений;
	// Как добавить элементы в список значений  
	СписокДней.Добавить("Пн", "Понедельник"); 
	СписокДней.Добавить("Вт", "Вторник"); 
	СписокДней.Добавить("Ср", "Среда"); 
	СписокДней.Добавить("Чт", "Четверг"); 
	СписокДней.Добавить("Пт", "Пятница"); 
	СписокДней.Добавить("Сб", "Суббота"); 
	СписокДней.Добавить("Вс", "Воскресенье"); 
	// Как получить количество элементов в списке значений
	КоличествоЗначений = СписокДней.Количество();
	// Как найти значение в списке значений  
	//1
	Среду = СписокДней.НайтиПоЗначению("Ср");
	//2
	Четверг = СписокДней.НайтиПоИдентификатору(3);
	// Как получить значение из списка значение (2 способа)
	//1
	Пятница = СписокДней.Получить(4);
	//2
	Пятница = СписокДней[4];
	// Обход всех элементов списка значений 
	Для каждого ЭлементСписка из СписокДней Цикл
		Сообщить(ЭлементСписка.Значение + " (" + ЭлементСписка.Представление + ")"); 
	КонецЦикла;
	// Показать список значений пользователю для выбора одного значения 
	ЧтоДелатьПослеВыбора = Новый ОписаниеОповещения("ПослеВыбораЗначения", ЭтотОбъект);
	СписокДней.ПоказатьВыборЭлемента(ЧтоДелатьПослеВыбора, "Выберите день удаленной работы");
	
	// Показать список значений пользователю для отметки нескольких значений 
	
	ЧтоДелатьПослеОтметки = Новый ОписаниеОповещения("ПослеОтметкиЗначений", ЭтотОбъект);
	СписокДней.ПоказатьОтметкуЭлементов(ЧтоДелатьПослеОтметки, "Выберите дни удаленной работы");
	// Как удалить элемент списка значений 
	СписокДней.Удалить(0);
	// Как очистить список значений 
	СписокДней.Очистить();
КонецПроцедуры   

&НаКлиенте   
// Показываем список пользователю
Процедура ПослеВыбораЗначения(ВыбранныйЭлемент, ДополнительныеПараметры) Экспорт
	Если ВыбранныйЭлемент = Неопределено Тогда     // проверяем не пустой ли наш Список значений  
		Возврат;
	КонецЕсли;   
	Сообщить("Вы будете работать удаленно в " + ВыбранныйЭлемент.Представление);
КонецПроцедуры  

&НаКлиенте 
Процедура ПослеОтметкиЗначений(Список, ДополнительныеПараметры) Экспорт
	Если Список = Неопределено Тогда     // проверяем не пустой ли наш Список значений  
		Возврат;
	КонецЕсли;     
	
	ДниУдаленнойРаботы = "";
	Для каждого ДеньНедели Из Список Цикл 
		Если ДеньНедели.Пометка Тогда // Делаем условие, что бы не выводить все дни недели одновременно, а только выбранные
			ДниУдаленнойРаботы = ДниУдаленнойРаботы + ?(ДниУдаленнойРаботы<>"", ", ","") + ДеньНедели.Представление;          
		КонецЕсли;
	КонецЦикла;
	Сообщить("Вы будете работать удаленно в следующие дни: " + ДниУдаленнойРаботы);
КонецПроцедуры

Дать возможность пользователю работать с этим списком 
Для примера 	 
Реквизиты - "ДниНедели" Тип - СписокЗначений - добавляем в виде таблицы 
Тип значения СправочникССылка
Добавляет в СписокЗначений картинки из БиблиотекаКартинок  ( это как иконки)

Таблица Значений 
Создаю группу   "СтраницаТаблицаЗначений "
Создаем команду "РаботаСТаблицейЗначений"
Действие - На клиенте и на сервере  
2 07